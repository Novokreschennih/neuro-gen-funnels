---
title: "Блог SetHubble: Новости и Статьи"
layout: layouts/base.njk
permalink: /blog/index.html
eleventyNavigation:
  key: Блог
  order: 1
---

{# --- БЛОК 1: ПОСЛЕДНИЕ НОВОСТИ --- #}
{% set newslist = collections.news | reverse %}
{% if newslist.length %}
<section class="latest-news">
  <div class="section-header">
    <h2 class="section-title-small">Последние Новости</h2>
    
  </div>
  <ol class="news-snapshot-list" style="list-style: none; padding: 0;">
  {%- for item in newslist | head(3) -%}
    <li class="news-snapshot-item">
      <time datetime="{{ item.date | htmlDateString }}">{{ item.date | readableDate }}</time>
      <h3><a href="{{ item.url | url }}">{{ item.data.title }}</a></h3>
    </li>
  {%- endfor -%}
  </ol>
  
  <a href="/news/" class="view-all-link">Все новости →</a>
  
</section>
{% endif %}

{# --- БЛОК 2: ГЛАВНАЯ СТАТЬЯ --- #}
{% set allPosts = collections.posts | reverse %}
{% set featuredPost = allPosts[0] %}
{% if featuredPost %}
<section class="featured-post">
  <div class="featured-post-content">
    <span class="featured-tag">Свежая Статья</span>
    <h2><a href="{{ featuredPost.url | url }}">{{ featuredPost.data.title }}</a></h2>
    {% if featuredPost.data.description %}
      <p>{{ featuredPost.data.description }}</p>
    {% endif %}
  </div>
</section>
{% endif %}

{# --- БЛОК 3: ПОСЛЕДНИЕ СТАТЬИ (С ПРАВИЛЬНЫМ ЦИКЛОМ) --- #}
<h2 class="section-title">Ещё Статьи</h2>

<ol reversed class="postlist" style="list-style: none; padding: 0;">
{# Перебираем ВЕСЬ список постов... #}
{%- for post in allPosts | head(7) -%} {# Берем только 7 последних постов #}
  {# ...но выводим карточку, ТОЛЬКО ЕСЛИ это НЕ ПЕРВЫЙ элемент #}
  {%- if not loop.first -%}
    <li class="postlist-item">
      <a href="{{ post.url | url }}" class="postlist-link">
        <h2>{{ post.data.title }}</h2>
        {% if post.data.description %}
          <p class="postlist-excerpt">{{ post.data.description }}</p>
        {% else %}
          <p class="postlist-excerpt">Читать далее…</p>
        {% endif %}
      </a>
    </li>
  {%- endif -%}
{%- endfor -%}
</ol>

{# --- НАВИГАЦИЯ (показываем только ссылку на полный архив) --- #}
{% if collections.posts.length > 7 %}
<div class="view-all-wrapper">
  <a href="/archive/" class="cta-button">Посмотреть все статьи</a>
</div>
{% endif %}