<!doctype html>
<html lang="{{ metadata.language }}">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>{{ title or metadata.title }}</title>
		<meta name="description" content="{{ description or metadata.description }}">

		<script>
			(function () {
				const theme = localStorage.getItem("theme");
				if (theme === "light") {
					document.documentElement.classList.add("light-theme");
				} else if (theme === "dark") {
					document.documentElement.classList.remove("light-theme");
				} else if (window.matchMedia("(prefers-color-scheme: light)").matches) {
					document.documentElement.classList.add("light-theme");
				}
			})();
		</script>
		
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" media="print" onload="this.media='all'">
		
		<link rel="icon" href="{{ '/favicon.svg' | url }}" type="image/svg+xml">
		<link type="application/rss+xml" rel="alternate" href="https://blog.sethubble.ru/feed/feed.xml" title="Блог о SetHubble">

		<link rel="stylesheet" href="/css/index.css">

		<script type="module">{% include "node_modules/@zachleat/heading-anchors/heading-anchors.js" %}</script>
	</head>
	<body>
		<a href="#main" id="skip-link" class="visually-hidden">Skip to main content</a>

		<div class="container">
			<div class="main-box">

				<header>
					<a href="/blog/" class="home-link">{{ metadata.title }}</a>
				
					<nav>
						<h2 class="visually-hidden">Top level navigation menu</h2>
						<ul class="nav">
						{%- for entry in collections.all | eleventyNavigation %}
							<li class="nav-item"><a href="{{ entry.url }}"{% if entry.url == page.url %} aria-current="page"{% endif %}>{{ entry.title }}</a></li>
						{%- endfor %}
						</ul>
					</nav>
					<a href="/" class="back-to-site">На лендинг →</a>
				</header>

				<main id="main">
					<heading-anchors>
						{{ content | safe }}
					</heading-anchors>
				</main>

				<footer>
					<div class="footer-cta">
						<h2>Готовы присоединиться к экосистеме?</h2>
						<a href="https://sethubble.com/ru/p_qdr" target="_blank" class="cta-button">Создать аккаунт SetHubble</a>
					</div>
				
					<div class="footer-meta">
						<a href="{{ '/tags/' | url }}">Посмотреть все теги</a>						
					</div>
				</footer>
			
			</div>
		</div>

		<!-- ✅ УДАЛЕНА СТРОКА С getBundleFileUrl -->
			
		<script type="text/javascript">
			(function (m, e, t, r, i, k, a) {
				m[i] = m[i] || function () { (m[i].a = m[i].a || []).push(arguments) };
				m[i].l = 1 * new Date();
				var z = e.createElement(t), p = e.getElementsByTagName(t)[0];
				k=m.Promise,a=p.parentNode,
				function(){
					var s = function(){z.async=true;z.src=r;a.insertBefore(z,p);};
					if(k){k.resolve().then(s)}else{s()}
				}();
			})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

			var metrikaId = 104313731;

			var initMetrika = function () {
				ym(metrikaId, "init", {
					clickmap:true, trackLinks:true, accurateTrackBounce:true, webvisor:true
				});
				['scroll', 'mousemove', 'touchmove', 'touchstart', 'click', 'keydown'].forEach(function(e) {
					window.removeEventListener(e, initMetrika, {passive: true});
				});
			};

			['scroll', 'mousemove', 'touchmove', 'touchstart', 'click', 'keydown'].forEach(function(e) {
				window.addEventListener(e, initMetrika, {passive: true, once: true});
			});
		</script>
		<noscript><div><img src="https://mc.yandex.ru/watch/104313731" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
	</body>
</html>