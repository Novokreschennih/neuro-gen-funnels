---
layout: layouts/base.njk
---
{# Подключаем стили для подсветки синтаксиса в коде #}
<style>{% include "node_modules/prismjs/themes/prism-okaidia.css" %}</style>
<style>{% include "css/prism-diff.css" %}</style>

<article class="post-content">
	<h1>{{ title }}</h1>

	{# --- ОБНОВЛЕННЫЙ БЛОК ДЛЯ ДАТЫ И ТЕГОВ --- #}
	<div class="post-metadata">
		<time datetime="{{ page.date | htmlDateString }}">{{ page.date | readableDate }}</time>
		{# `tags` здесь - это массив slug'ов из Front Matter вашего поста #}
		{%- if tags %}
		<div class="tags-list">
			{# `collections.tagList` - стандартная коллекция Eleventy со всеми тегами. #}
			{# Мы перебираем теги (slug'и) текущего поста #}
			{%- for tagSlug in tags | filterTagList %}
				{# `collections.tagList` может быть недоступен, если теги не определены глобально #}
				{# поэтому мы будем использовать наш собственный словарь `_data/tags.js` #}

				{# Проверяем, есть ли такой slug в нашем словаре `tags` из _data/tags.js #}
				{%- if eleventy.globaldata.tags[tagSlug] %}
					{# Формируем URL из slug'а #}
					{%- set tagUrl %}/tags/{{ tagSlug }}/{% endset %}
					<a href="{{ tagUrl }}" class="post-tag">
						{# Отображаем красивое русское имя из нашего словаря #}
						{{ eleventy.globaldata.tags[tagSlug] }}
					</a>
				{%- endif %}
			{%- endfor %}
		</div>
		{%- endif %}
	</div>

	{{ content | safe }}
</article>

{# --- НОВЫЙ CTA-БЛОК --- #}
<section class="cta-block">
  <h2>Увидели потенциал?</h2>
  <p>Не просто верьте нам на слово. Рассчитайте свой собственный годовой доход на нашем интерактивном симуляторе.</p>
  <a href="{{ '/calculator/' | url }}" class="cta-button">Открыть Калькулятор Дохода</a>
</section>

{# Навигация "Следующий/Предыдущий пост" #}
{%- set previousPost = collections.posts | getPreviousCollectionItem %}
{%- set nextPost = collections.posts | getNextCollectionItem %}
{%- if nextPost or previousPost %}
<nav class="links-nextprev">
	{%- if previousPost %}<a class="links-nextprev-prev" href="{{ previousPost.url }}">
		<span>← Предыдущая</span>
		<strong>{{ previousPost.data.title }}</strong>
	</a>{% else %}<span></span>{% endif %}

	{%- if nextPost %}<a class="links-nextprev-next" href="{{ nextPost.url }}">
		<span>Следующая →</span>
		<strong>{{ nextPost.data.title }}</strong>
	</a>{% endif %}
</nav>
{%- endif %}
