---
title: "Блог о SetHubble: Новости и Статьи"
layout: layouts/base.njk
permalink: /blog/index.html
eleventyNavigation:
  key: Главная
  order: 1
---

{# --- БЛОК 1: ПОСЛЕДНИЕ НОВОСТИ (ТЕПЕРЬ НАВЕРХУ) --- #}
{% set newslist = collections.news | reverse %}
{% if newslist.length %}
<section class="latest-news">
  <div class="section-header">
    <h2 class="section-title-small">Последние Новости</h2>
    <a href="/news/" class="view-all-link">Все новости →</a>
  </div>
  <ol class="news-snapshot-list" style="list-style: none; padding: 0;">
  {# ИСПОЛЬЗУЕМ РАБОЧИЙ ФИЛЬТР `head` ВМЕСТО `slice` #}
  {%- for item in newslist | head(3) -%}
    <li class="news-snapshot-item">
      <time datetime="{{ item.date | htmlDateString }}">{{ item.date | readableDate }}</time>
      <h3><a href="{{ item.url | url }}">{{ item.data.title }}</a></h3>
    </li>
  {%- endfor -%}
  </ol>
</section>
{% endif %}


{# --- БЛОК 2: ГЛАВНАЯ СТАТЬЯ --- #}
{% set allPosts = collections.posts | reverse %}
{% set featuredPost = allPosts[0] %}
{% if featuredPost %}
<section class="featured-post">
  <div class="featured-post-content">
    <span class="featured-tag">Свежая Статья</span>
    <h2><a href="{{ featuredPost.url | url }}">{{ featuredPost.data.title }}</a></h2>
    {% if featuredPost.data.description %}
      <p>{{ featuredPost.data.description }}</p>
    {% endif %}
  </div>
</section>
{% endif %}


{# --- БЛОК 3: ОСТАЛЬНЫЕ СТАТЬИ --- #}
<h2 class="section-title">Остальные Статьи</h2>

<ol reversed class="postlist" style="list-style: none; padding: 0;">
{# Перебираем ВЕСЬ список постов... #}
{%- for post in allPosts -%}
  {# ...но выводим карточку, ТОЛЬКО ЕСЛИ это НЕ ПЕРВЫЙ элемент #}
  {%- if not loop.first -%}
    <li class="postlist-item">
      <a href="{{ post.url | url }}" class="postlist-link">
        <h2>{{ post.data.title }}</h2>
        {% if post.data.description %}
          <p class="postlist-excerpt">{{ post.data.description }}</p>
        {% else %}
          <p class="postlist-excerpt">Читать далее…</p>
        {% endif %}
      </a>
    </li>
  {%- endif -%}
{%- endfor -%}
</ol>